openapi: 3.0.3
info:
  title: ITspace - OpenAPI 3.0
  description: |-
     itSpace API documentation, binar final project K13
  contact:
    email: rian.rafli@gmail.com
  version: 1.0.0
servers:
  - url: https://it-space-develop.up.railway.app/api/v1
  - url: http://localhost:8000/api/v1

tags:
  - name: courses
    description: Everything about courses
  - name : auth
    description: Register,login and logout
  - name : users
    description: Everything about users
  - name : categories
    description: Everything about categories
  - name : transactions
    description: Everything about transactions
  - name : enrollments
    description: Everything about enrollments
  - name : ratings
    description: Everything about ratings
  - name : chapters
    description: Everything about chapters
  - name : videos
    description: Everything about videos
  - name : progress
    description: Everything about progress
  
paths:
  /courses:
    post:
      tags:
        - courses
      description: create new course - [DONE]
      requestBody:
        content:
          application/json:
            schema:
                $ref: '#/components/schemas/updateCoursesReq'

      responses:
        '201':
          description: Successful operation
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/basicResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/createCoursesResponse'
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse400'
        '401':
          description: Unauthenticated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse401'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse403'
        '404':
          description: Not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse404'
        '500':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse500'          
    get:
      tags:
        - courses
      description: get all course [DONE]
      parameters:
        - in: query
          name: ispremium
          example: 1
          schema:
            type: string
          description: 1 = premium, 0 = not premium
        - in: query
          name: category
          example : backend,frontend
          schema:
            type: string
          description: filter course by categories
        - in: query
          name: level
          example: BEGINNER,INTERMEDIATE,ADVANCED
          schema:
            type: string
          description: filter course by level
        - in: query
          name: se
          schema:
            type: string
          description: search title of course
        - in: query
          name: page
          example: 1
          schema:
            type: integer
          description: the page you want to access
        - in: query
          name: limit
          example: 10
          schema:
            type: integer
          description: The numbers of items to return
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/basicResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          pagination:
                            $ref: "#/components/schemas/Pagination"
                          courses:
                            type: array
                            items:
                              $ref: "#/components/schemas/courseGetAll"
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse400'
        '401':
          description: Unauthenticated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse401'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse403'
        '404':
          description: Not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse404'
        '500':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse500'
  /courses/{courseId}:
    get:
      tags:
        - courses
      description: get specific course [not copleted]
      parameters:
        - in: path
          name: courseId
          schema:
            type: integer
          required: true
          description: The ID of the course to get.
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
             schema:
                allOf:
                  - $ref: '#/components/schemas/basicResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/getCoursesResponse'
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse400'
        '401':
          description: Unauthenticated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse401'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse403'
        '404':
          description: Not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse404'
        '500':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse500'
    put:
      tags:
        - courses
      description: update course detail [DONE]
      parameters:
        - in: path
          name: courseId
          schema:
            type: integer
          required: true
          description: The ID of the course to get.
      requestBody:
        content:
          application/json:
            schema:
                $ref: '#/components/schemas/updateCoursesReq'

      responses:
        '201':
          description: Successful operation
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/basicResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/createCoursesResponse'
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse400'
        '401':
          description: Unauthenticated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse401'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse403'
        '404':
          description: Not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse404'
        '500':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse500'
  
    delete:
      tags:
        - courses
      description: Deletes a specific course. [DONE]
      parameters:
       - in: path
         name: courseId
         schema:
           type: integer
         required: true
         description: The ID of the course to delete.
      responses:
        "200":
          description: Successful user deletion 
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/basicResponse"
                  - type: object
                    properties:
                      data:
                         $ref: '#/components/schemas/deleteCoursesResponse'
                           
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse400'
        '401':
          description: Unauthenticated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse401'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse403'
        '404':
          description: Not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse404'
        '500':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse500'
  /auth/register:
    post:
      tags:
        - auth
      description: create new course [DONE]
      requestBody:
        content:
          application/json:
            schema:
                $ref: '#/components/schemas/RegisterReqBody'

      responses:
        '201':
          description: Successful operation
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/basicResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/RegisterResponse'
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse400'
        '401':
          description: Unauthenticated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse401'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse403'
        '404':
          description: Not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse404'
        '500':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse500' 
  /auth/login:
    post:
      tags:
        - auth
      description: User login [DONE]
      requestBody:
        content:
          application/json:
            schema:
                $ref: '#/components/schemas/LoginReqBody'

      responses:
        '201':
          description: Successful operation
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/basicResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/LoginResponse'
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse400'
        '401':
          description: Unauthenticated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse401'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse403'
        '404':
          description: Not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse404'
        '500':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse500' 
  /auth/logout:
    post:
      tags:
        - auth
      description: User login [DONE]

      responses:
        '201':
          description: Successful operation
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/basicResponse'
                  - type: object
                    properties:
                      data: 
                        type: string
                        example: null
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse400'
        '401':
          description: Unauthenticated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse401'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse403'
        '404':
          description: Not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse404'
        '500':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse500' 
  /auth/resend-otp/{email}:
    get:
      tags:
        - auth
      description: resend otp to email, for account verification [DONE]
      parameters:
      - in: path
        name: email
        example: example@gmail.com
        schema:
          type: string
        required: true
      
      responses:
        '201':
          description: Successful operation
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/basicResponse'
                  - type: object
                    properties:
                      data: 
                        type: string
                        example: example@gmail.com
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse400'
        '401':
          description: Unauthenticated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse401'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse403'
        '404':
          description: Not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse404'
        '500':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse500' 
  /auth/verify-otp:
    put:
      tags:
        - auth
      description: verify your otp that has sent to your email [DONE]
      
      responses:
        '201':
          description: Successful operation
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/basicResponse'
                  - type: object
                    properties:
                      data: 
                        type: object
                        properties:
                          id:
                            type: integer
                            example: 1
                          email:
                            type: string
                            example: example@gmail.com
                          verified:
                            type: boolean
                            example: true
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse400'
        '401':
          description: Unauthenticated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse401'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse403'
        '404':
          description: Not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse404'
        '500':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse500' 
  /auth/reset-password:
    get:
      tags:
        - auth
      description: send reset password form to your email [DONE]
      requestBody:
       content:
        application/json:
          schema:
            type: object
            properties:
              email:
                type: string
                example: example@gmail.com
      responses:
        '201':
          description: Successful operation
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/basicResponse'
                  - type: object
                    properties:
                      data: 
                        type: string
                        example: example@gmail.com
                  
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse400'
        '401':
          description: Unauthenticated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse401'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse403'
        '404':
          description: Not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse404'
        '500':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse500' 
  /auth/reset-password/{token}:
    put:
      tags:
        - auth
      description: reset user password [DONE]
      parameters:
          - in: path
            name: token
            schema:
              type: string
            required: true
      requestBody:
       content:
        application/json:
          schema:
            type: object
            properties:
              newPassword:
                type: string
                example: password123
              newPasswordValidation:
                type: string
                example: password123
      responses:
        '201':
          description: Successful operation
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/basicResponse'
                  - type: object
                    properties:
                      data: 
                        type: object
                        properties:
                          id:
                            type: integer
                            example: 1
                          email:
                            type: string
                            example: example@gmail.com

                  
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse400'
        '401':
          description: Unauthenticated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse401'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse403'
        '404':
          description: Not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse404'
        '500':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse500' 
  /auth/change-password:
    put:
      tags:
        - auth
      description: reset user password [DONE]
      requestBody:
       content:
        application/json:
          schema:
            type: object
            properties:
              oldPassword:
                type: string
                example: password123
              newPassword:
                type: string
                example: password1234
              newPasswordValidation:
                type: string
                example: password1234
      responses:
        '201':
          description: Successful operation
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/basicResponse'
                  - type: object
                    properties:
                      data: 
                        type: object
                        properties:
                          id:
                            type: integer
                            example: 1
                          email:
                            type: string
                            example: example@gmail.com

                  
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse400'
        '401':
          description: Unauthenticated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse401'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse403'
        '404':
          description: Not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse404'
        '500':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse500' 
  /users:
    get:
      tags:
        - users
      description: get all user [DONE]
      responses:
        '201':
          description: Successful operation
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/basicResponse'
                  - type: object
                    properties:
                      data: 
                        type: object
                        properties:
                          pagination:
                            $ref: "#/components/schemas/Pagination"
                          users:
                            type: array
                            items:
                              type: object
                              properties:
                                id :
                                  type: integer
                                  example: 1
                                email :
                                  type: string
                                  example: example@gmail.com
                                verified :
                                  type: boolean
                                  example: true
                                profile:
                                  type: object
                                  properties:
                                    name :
                                      type: string
                                      example: john doe
                                    phoneNumber :
                                      type: string
                                      example: 08888888
                                    role :
                                      type: string
                                      example: ADMIN
  /users/{id}:
      get:
        tags:
          - users
        parameters:
          - in: path
            name: id
            schema:
              type: integer
            required: true
        description: get user detail [DONE]
        responses:
          '201':
            description: Successful operation
            content:
              application/json:
                schema:
                  allOf:
                    - $ref: '#/components/schemas/basicResponse'
                    - type: object
                      properties:
                        data: 
                            type: object
                            properties:
                              id :
                                type: integer
                                example: 1
                              email :
                                type: string
                                example: example@gmail.com
                              verified :
                                type: boolean
                                example: true
                              profile:
                                type: object
                                properties:
                                  name :
                                    type: string
                                    example: john doe
                                  phoneNumber :
                                    type: string
                                    example: 08888888
                                  profilePicture :
                                     type: string
                                     example: example.com
                                  role :
                                    type: string
                                    example: ADMIN
                                  joinDate :
                                    type: string
                                    example: 2023-11-29T18:11:00.927Z
                                  location :
                                    type: string
                                    example: Bandung
          '400':
            description: Bad request
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/ErrorResponse400'
          '401':
            description: Unauthenticated
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/ErrorResponse401'
          '403':
            description: Forbidden
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/ErrorResponse403'
          '404':
            description: Not found
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/ErrorResponse404'
          '500':
            description: Bad request
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/ErrorResponse500'
      put:
        tags:
          - users
        parameters:
          - in: path
            name: id
            schema:
              type: integer
            required: true
        requestBody:
          content:
           application/json:
             schema:
               type: object
               properties:
                 name:
                   type: string
                   example: john doe
                 phoneNumber:
                   type: string
                   example: 0000000
                 location:
                   type: string
                   example: Jakarta
                 image:
                    type: string
                    example: upload profile picture here
        description: Update profile [DONE]
        responses:
          '201':
            description: Successful operation
            content:
              application/json:
                schema:
                  allOf:
                    - $ref: '#/components/schemas/basicResponse'
                    - type: object
                      properties:
                        data: 
                                type: object
                                properties:
                                  name :
                                    type: string
                                    example: john doe
                                  phoneNumber :
                                    type: string
                                    example: 08888888
                                  profilePicture :
                                     type: string
                                     example: example.com
                                  role :
                                    type: string
                                    example: ADMIN
                                  joinDate :
                                    type: string
                                    example: 2023-11-29T18:11:00.927Z
                                  location :
                                    type: string
                                    example: Bandung
          '400':
            description: Bad request
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/ErrorResponse400'
          '401':
            description: Unauthenticated
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/ErrorResponse401'
          '403':
            description: Forbidden
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/ErrorResponse403'
          '404':
            description: Not found
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/ErrorResponse404'
          '500':
            description: Bad request
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/ErrorResponse500'
      delete :
          tags:
            - users
          parameters:
            - in: path
              name: id
              schema:
                type: integer
              required: true
          description: delete profile [DONE]
          responses:
            '201':
              description: Successful operation
              content:
                application/json:
                  schema:
                    allOf:
                      - $ref: '#/components/schemas/basicResponse'
                      - type: object
                        properties:
                          data: 
                                  type: object
                                  properties:
                                    id :
                                      type: integer
                                      example: 1
                                    email :
                                       type: string
                                       example: example@gmail.com
            '400':
              description: Bad request
              content:
                application/json:
                  schema:
                    $ref: '#/components/schemas/ErrorResponse400'
            '401':
              description: Unauthenticated
              content:
                application/json:
                  schema:
                    $ref: '#/components/schemas/ErrorResponse401'
            '403':
              description: Forbidden
              content:
                application/json:
                  schema:
                    $ref: '#/components/schemas/ErrorResponse403'
            '404':
              description: Not found
              content:
                application/json:
                  schema:
                    $ref: '#/components/schemas/ErrorResponse404'
            '500':
              description: Bad request
              content:
                application/json:
                  schema:
                    $ref: '#/components/schemas/ErrorResponse500'



  /categories:
    post:
      tags:
        - categories
      description: create new course
      requestBody:
        content:
          application/json:
            schema:
                $ref: '#/components/schemas/createCategoriesReqBody'  
      responses:
        '201':
          description: Successful operation
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/basicResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/createCategoriesResponse'
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse400'
        '401':
          description: Unauthenticated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse401'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse403'
        '404':
          description: Not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse404'
        '500':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse500' 
    get:
      tags:
        - categories
      description: get all categories
      responses:
        '201':
          description: Successful operation
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/basicResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                            $ref: "#/components/schemas/createCategoriesResponse"

        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse400'
        '401':
          description: Unauthenticated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse401'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse403'
        '404':
          description: Not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse404'
        '500':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse500' 
  /categories/{categoryId}:             
    put:
      tags:
        - categories
      description: update category
      parameters:
      - in: path
        name: categoryId
        schema:
          type: integer
        required: true
      requestBody:
        content:
          application/json:
            schema:
                $ref: '#/components/schemas/createCategoriesReqBody'  
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/basicResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/createCategoriesResponse'
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse400'
        '401':
          description: Unauthenticated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse401'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse403'
        '404':
          description: Not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse404'
        '500':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse500' 
    delete:
      tags:
        - categories
      description: delete category
      parameters:
      - in: path
        name: categoryId
        schema:
          type: integer
        required: true
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/basicResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/createCategoriesResponse'
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse400'
        '401':
          description: Unauthenticated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse401'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse403'
        '404':
          description: Not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse404'
        '500':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse500' 

  /transactions:
    post:
      tags:
        - transactions
      description: create new course
      requestBody:
        content:
          application/json:
            schema:
               type: object
               properties:
                courseId :
                  type: integer  
                  example : 1
                paymentMethod: 
                  type: string
                  example: cc
      responses:
        '201':
          description: Successful operation
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/basicResponse'
                  - type: object
                    properties:
                      data:
                       type: object
                       properties:
                          id:
                            type: integer
                            example: 1
                          date:
                           type: string
                           example: "2023-12-06T16:13:46.710Z"
                          expirationDate:
                           type: string
                           example: "2023-12-07T16:13:46.710Z"
                          payDone:
                           type: boolean
                           example: false
                          payDate:
                           type: string
                           example: null
                          paymentMethod:
                           type: string
                           example: "cc"
                          course:
                           type: object
                           properties:
                              id:
                               type: integer
                               example: 1
                              code:
                                type: string
                                example: "BEJS"
                              title:
                                type: string
                                example: "Backend javascript"
                              price:
                                type: string
                                example: "100000"
                              level:
                                type: string
                                example: "BEGINNER"
                              ispremium:
                                type: boolean
                                example: true
                             
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse400'
        '401':
          description: Unauthenticated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse401'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse403'
        '404':
          description: Not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse404'
        '500':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse500' 
    get:
      tags:
        - transactions
      description: create new course
      parameters:
        - in: query
          name: status
          example: 1
          schema:
            type: string
          description: 1 = already paid, 0 = not paid yet
        - in: query
          name: courseCode
          example : BEJS
          schema:
            type: string
          description: filter course by course code
        - in: query
          name: method
          example: cc
          schema:
            type: string
          description: filter course payment method
        - in: query
          name: se
          schema:
            type: string
          description: search title of course
        - in: query
          name: from
          example: 12/5/2023
          schema:
            type: string
          description: filter transactions by the start date of 
        - in: query
          name: to
          example: 12/6/2023
          schema:
            type: string
          description: filter transactions by the end date of 
      responses:
        '201':
          description: Successful operation
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/basicResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          rangeDate:
                           type: object
                           properties:
                             from:
                              type: string
                              example: 2023-12-04T17:00:00.000Z
                             to:
                              type: string
                              example: 2023-12-07T17:59:47.297Z
                          transactions :
                           type: array
                           items :
                            type: object
                            properties:
                              id:
                               type: integer
                               example: 1
                              date:
                               type: string
                               example: "2023-12-06T16:13:46.710Z"
                              expirationDate:
                               type: string
                               example: "2023-12-07T16:13:46.710Z"
                              payDone:
                               type: boolean
                               example: true

                              payDate:
                               type: boolean
                               example: true

                              paymentMethod:
                               type: string
                               example: "cc"
                              course:
                               type: object
                               properties:
                                  id:
                                   type: integer
                                   example: 1
                                  code:
                                    type: string
                                    example: "BEJS"
                                  title:
                                    type: string
                                    example: "Backend javascript"
                                  price:
                                    type: string
                                    example: "100000"
                                  level:
                                    type: string
                                    example: "BEGINNER"
                                  ispremium:
                                    type: boolean
                                    example: true
                            
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse400'
        '401':
          description: Unauthenticated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse401'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse403'
        '404':
          description: Not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse404'
        '500':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse500'
  /transactions/{id}: 
    get:
      tags:
        - transactions
      description: get transaction detail
      parameters:
        - in: path
          name: id
          schema:
            type: integer
          required: true
      responses:
        '201':
          description: Successful operation
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/basicResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          id:
                           type: integer
                           example: 1
                          date:
                           type: string
                           example: "2023-12-06T16:13:46.710Z"
                          expirationDate:
                           type: string
                           example: "2023-12-07T16:13:46.710Z"
                          payDone:
                           type: boolean
                           example: true
                          
                          payDate:
                           type: boolean
                           example: true
                          
                          paymentMethod:
                           type: string
                           example: "cc"
                          course:
                           type: object
                           properties:
                              id:
                               type: integer
                               example: 1
                              code:
                                type: string
                                example: "BEJS"
                              title:
                                type: string
                                example: "Backend javascript"
                              price:
                                type: string
                                example: "100000"
                              level:
                                type: string
                                example: "BEGINNER"
                              ispremium:
                                type: boolean
                                example: true
                            
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse400'
        '401':
          description: Unauthenticated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse401'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse403'
        '404':
          description: Not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse404'
        '500':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse500' 
    put:
      tags:
        - transactions
      description: pay transaction
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        required: true
      responses:
        '201':
          description: Successful operation
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/basicResponse'
                  - type: object
                    properties:
                      data:
                       type: object
                       properties:
                          id:
                           type: integer
                           example: 1
                          date:
                           type: string
                           example: "2023-12-06T16:13:46.710Z"
                          expirationDate:
                           type: string
                           example: "2023-12-07T16:13:46.710Z"
                          payDone:
                           type: boolean
                           example: true
                          payDate:
                           type: string
                           example: "2023-12-06T19:35:33.128Z"
                          paymentMethod:
                           type: string
                           example: "cc"
                          course:
                           type: object
                           properties:
                              id:
                               type: integer
                               example: 1
                              code:
                                type: string
                                example: "BEJS"
                              title:
                                type: string
                                example: "Backend javascript"
                              price:
                                type: string
                                example: "100000"
                              level:
                                type: string
                                example: "BEGINNER"
                              ispremium:
                                type: boolean
                                example: true
    delete:
      tags:
        - transactions
      description: create new course
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        required: true
      responses:
        '201':
          description: Successful operation
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/basicResponse'
                  - type: object
                    properties:
                      data:
                       type: object
                       properties:
                          id:
                           type: integer
                           example: 1
                          date:
                           type: string
                           example: "2023-12-06T16:13:46.710Z"
                          expirationDate:
                           type: string
                           example: "2023-12-07T16:13:46.710Z"
                          payDone:
                           type: boolean
                           example: true
                          payDate:
                           type: string
                           example: "2023-12-06T19:35:33.128Z"
                          paymentMethod:
                           type: string
                           example: "cc"
                          course:
                           type: object
                           properties:
                              id:
                               type: integer
                               example: 1
                              code:
                                type: string
                                example: "BEJS"
                              title:
                                type: string
                                example: "Backend javascript"
                              price:
                                type: string
                                example: "100000"
                              level:
                                type: string
                                example: "BEGINNER"
                              ispremium:
                                type: boolean
                                example: true
                           
                           
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse400'
        '401':
          description: Unauthenticated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse401'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse403'
        '404':
          description: Not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse404'
        '500':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse500' 
  /my-transactions:
    get:
      tags:
        - transactions
      description: transactions of logged in user
      parameters:
        - in: query
          name: status
          example: 1
          schema:
            type: string
          description: 1 = already paid, 0 = not paid yet
        - in: query
          name: courseCode
          example : BEJS
          schema:
            type: string
          description: filter course by course code
        - in: query
          name: method
          example: cc
          schema:
            type: string
          description: filter course payment method
        - in: query
          name: se
          schema:
            type: string
          description: search title of course
        - in: query
          name: from
          example: 12/5/2023
          schema:
            type: string
          description: filter transactions by the start date of 
        - in: query
          name: to
          example: 12/6/2023
          schema:
            type: string
          description: filter transactions by the end date of 
      responses:
        '201':
          description: Successful operation
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/basicResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          rangeDate:
                           type: object
                           properties:
                             from:
                              type: string
                              example: 2023-12-04T17:00:00.000Z
                             to:
                              type: string
                              example: 2023-12-07T17:59:47.297Z
                          transactions :
                        
                            type: array
                            items :
                             type: object
                             properties:
                               id:
                                type: integer
                                example: 1
                               date:
                                type: string
                                example: "2023-12-06T16:13:46.710Z"
                               expirationDate:
                                type: string
                                example: "2023-12-07T16:13:46.710Z"
                               payDone:
                                type: boolean
                                example: true
                               
                               payDate:
                                type: boolean
                                example: true
                               
                               paymentMethod:
                                type: string
                                example: "cc"
                               course:
                                type: object
                                properties:
                                   id:
                                    type: integer
                                    example: 1
                                   code:
                                     type: string
                                     example: "BEJS"
                                   title:
                                     type: string
                                     example: "Backend javascript"
                                   price:
                                     type: string
                                     example: "100000"
                                   level:
                                     type: string
                                     example: "BEGINNER"
                                   ispremium:
                                     type: boolean
                                     example: true
                            
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse400'
        '401':
          description: Unauthenticated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse401'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse403'
        '404':
          description: Not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse404'
        '500':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse500'
  /enrollments:
    post:
      tags:
        - enrollments
      description: create new enrollment
      requestBody:
        content:
          application/json:
            schema:
               type: object
               properties:
                courseId :
                  type: integer  
                  example : 1
      responses:
        '201':
          description: Successful operation
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/basicResponse'
                  - type: object
                    properties:
                      data:
                       type: object
                       properties:
                          id:
                            type: integer
                            example: 1
                          date:
                           type: string
                           example: "2023-12-06T16:13:46.710Z"
                          course:
                           type: object
                           properties:
                              id:
                               type: integer
                               example: 1
                              code:
                                type: string
                                example: "BEJS"
                              title:
                                type: string
                                example: "Backend javascript"
                              price:
                                type: string
                                example: "0"
                              level:
                                type: string
                                example: "BEGINNER"
                              ispremium:
                                type: boolean
                                example: false
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse400'
        '401':
          description: Unauthenticated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse401'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse403'
        '404':
          description: Not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse404'
        '500':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse500'
  /my-enrollments: 
    get:
      tags:
        - enrollments
      description: list of enrolled course of logged in user
      parameters:
      - in: query
        name: ispremium
        example: 1
        schema:
          type: string
        description: 1 = premium, 0 = not premium
      - in: query
        name: category
        example : backend,frontend
        schema:
          type: string
        description: filter course by categories
      - in: query
        name: level
        example: BEGINNER,INTERMEDIATE,ADVANCED
        schema:
          type: string
        description: filter course by level
      - in: query
        name: se
        schema:
          type: string
        description: search title of course
      - in: query
        name: page
        example: 1
        schema:
          type: integer
        description: the page you want to access
      - in: query
        name: limit
        example: 10
        schema:
          type: integer
        description: The numbers of items to return
      responses:
        '201':
          description: Successful operation
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/basicResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          id :
                            type: integer
                            example: 1
                          code :
                            type: string
                            example: BE1
                          title:
                            type: string
                            example: Backend dengan expressjs
                          price:
                             type: integer
                             example: 1000
                          level:
                            type: string
                            example: BEGINNER
                          isPremium:
                            type: boolean
                            example: true
                          groupUrl:
                           type: string
                           example: www.url.com
                          thumbnailUrl:
                           type: string
                           example: www.url.com
                          courseCategory:
                            type: array
                            items:
                              type: object
                              properties:
                                category:
                                  type: object
                                  properties:
                                    name:
                                      type: string
                                      example: backend
                          mentor:
                            type: array
                            items:
                              type: object
                              properties:
                                author:
                                  type: object
                                  properties:
                                    profile:
                                      type: object
                                      properties:
                                        name:
                                          type: string
                                          example: john doe
                                        Pagination:
                                          title: Pagination
                                          type: object
                                          properties:
                                            links:
                                              type: object
                                              properties:
                                                next:
                                                  type: string
                                                  example: "https://domain.com/courses?categories=Backend&level=BEGINNER&page=3&limit=10"
                                                prev:
                                                  type: string
                                                  example: "https://domain.com/courses?categories=Backend&level=BEGINNER&page=1&limit=10"
                                            total_items:
                                              type: integer
                                              example: 100      
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse400'
        '401':
          description: Unauthenticated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse401'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse403'
        '404':
          description: Not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse404'
        '500':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse500'
  


#---------------------------------------components--------------------------------------

components:
  schemas:
    basicResponse:
      title: basicResponse
      type: object
      properties:
        success:
          type: boolean
          example: true
        message:
          type: string
          example: "successfully do task"
    ErrorResponse400:
      type: object
      properties:
        success:
          type: boolean
          example: false
        message:
          type: string
          example: "failed to do task"
        data:
          type: integer
          nullable: true
          example : null
    ErrorResponse401:
      type: object
      properties:
        success:
          type: boolean
          example: false
        message:
          type: string
          example: "Unauthorized"
        data:
          type: integer
          nullable: true
          example : null
    ErrorResponse403:
      type: object
      properties:
        success:
          type: boolean
          example: false
        message:
          type: string
          example: "Forbidden"
        data:
          type: integer
          nullable: true
          example : null
    ErrorResponse404:
      type: object
      properties:
        success:
          type: boolean
          example: false
        message:
          type: string
          example: "not found"
        data:
          type: integer
          nullable: true
          example : null
    ErrorResponse500:
      type: object
      properties:
        success:
          type: boolean
          example: false
        message:
          type: string
          example: "failed to do task"
        data:
          type: integer
          nullable: true
          example : null
    createCoursesResponse:
      title: course
      type: object
      properties:
        id:
          type: integer
          example: 1
        code: 
          type: string
          example: "BEX12"
        title:
          type: string
          example: "Backend dengan expressjs"
        price:
          type: string
          example: 900000
        level:
          type: string
          example: "BEGINNER"
        isPremium:
          type: boolean
          example: true
        description:
          type: string
          example: "course ini akan mengejarkan kamu tentang API"
        groupUrl:
          type: string
          example: "www.url.com"
        thumbnailUrl:
          type: string
          example : "www.url.com"
        mentor:
          type: array
          items:
            type: string
          example : ["mentor1@gmail.com","mentor2@gmail.com"]
        category:
          type: array
          items:
            type: string
          example : ["Backend","Database"]
    deleteCoursesResponse:
      title: course
      type: object
      properties:
        id:
          type: integer
          example: 1
        code: 
          type: string
          example: "BEX12"
        title:
          type: string
          example: "Backend dengan expressjs"
        price:
          type: string
          example: 900000
        level:
          type: string
          example: "BEGINNER"
        isPremium:
          type: boolean
          example: true
        description:
          type: string
          example: "course ini akan mengejarkan kamu tentang API"
        groupUrl:
          type: string
          example: "www.url.com"
        thumbnailUrl:
          type: string
          example: "www.url.com"
    getCoursesResponse:
      type: object
      properties:
        id :
          type: integer
          example: 1
        code :
          type: string
          example: BE1
        title:
          type: string
          example: Backend dengan expressjs
        price:
           type: integer
           example: 1000
        level:
          type: string
          example: BEGINNER
        isPremium:
          type: boolean
          example: true
        groupUrl:
         type: string
         example: www.url.com
        thumbnailUrl:
         type: string
         example: www.url.com
        courseCategory:
          type: array
          items:
            type: object
            properties:
              category:
                type: object
                properties:
                  name:
                    type: string
                    example: backend
        mentor:
          type: array
          items:
            type: object
            properties:
              author:
                type: object
                properties:
                  profile:
                    type: object
                    properties:
                      name:
                        type: string
                        example: john doe
                  
        rating:
          type: integer
          example: 4
        progress:
          type: integer
          example: 4
        chapter:
          type: array
          items:
            example : [{"id": 1,"title" : "pendahuluan", "duration" : "20","video" : [ {"id": 3, "title": "Judul Video 3"}, {"id": 4, "title": "Judul Video 4"}]},{"id": 2,"title" : "pemrograman dasar", "duration" : "20","video" : [ {"id": 1, "title": "Judul Video 1"}, {"id": 1, "title": "Judul Video 1"}]}]
    Courses:
      type: object
      properties:
        id:
          type: integer
          example: 1
        code: 
          type: string
          example: "BEX12"
        title:
          type: string
          example: Backend dengan expressjs
        price:
          type: string
          example: 200000
        level:
          type: string
          example: BEGINNER
        isPremium:
          type: boolean
          example: true
        description:
          type: string
          example: "course ini akan mengejarkan kamu tentang API"
        groupUrl:
          type: string
          example: "www.url.com"
        mentor:
           type: array
           items:
            type: string
           example : ["john@gmail.com","doe@gmail.com"]
        category:
          type: array
          items:
            type: string
          example : ["Backend","Database"]
    updateCoursesReq:
      type: object
      properties:
        code: 
          type: string
          example: "BEX12"
        title:
          type: string
          example: Backend dengan expressjs
        price:
          type: string
          example: 200000
        level:
          type: string
          example: BEGINNER
        isPremium:
          type: string
          example: 1
        description:
          type: string
          example: "course ini akan mengejarkan kamu tentang API"
        groupUrl:
          type: string
          example: "www.url.com"
        image:
            type: string
            format: binary
            example : "upload thumbnail image here"
        mentorEmail:
           type: array
           items:
            type: string
           example : ["john@gmail.com","doe@gmail.com"]
        courseCategory:
          type: array
          items:
            type: string
          example : ["Backend","Database"]
          
    courseGetAll:
      type: object
      properties:
        id :
          type: integer
          example: 1
        code :
          type: string
          example: BE1
        title:
          type: string
          example: Backend dengan expressjs
        price:
           type: integer
           example: 1000
        level:
          type: string
          example: BEGINNER
        isPremium:
          type: boolean
          example: true
        groupUrl:
         type: string
         example: www.url.com
        thumbnailUrl:
         type: string
         example: www.url.com
        courseCategory:
          type: array
          items:
            type: object
            properties:
              category:
                type: object
                properties:
                  name:
                    type: string
                    example: backend
        mentor:
          type: array
          items:
            type: object
            properties:
              author:
                type: object
                properties:
                  profile:
                    type: object
                    properties:
                      name:
                        type: string
                        example: john doe
                  
              
                  
          
          
    Pagination:
      title: Pagination
      type: object
      properties:
        links:
          type: object
          properties:
            next:
              type: string
              example: "https://domain.com/courses?categories=Backend&level=BEGINNER&page=3&limit=10"
            prev:
              type: string
              example: "https://domain.com/courses?categories=Backend&level=BEGINNER&page=1&limit=10"
        total_items:
          type: integer
          example: 100
    RegisterReqBody:
      title: Register
      type: object
      properties:
        name:
          type: string
          example: name example
        email:
         type: string
         example: example@gmail.com
        password:
          type: string
          example: password123
        passwordValidation:
          type: string
          example: password123
        image:
            type: string
            format: binary
            example : "upload profile pic image here"
    RegisterResponse:
      title: Register response
      type: object
      properties:
        id:
          type: integer
          example: 3
        email:
         type: string
         example: example@gmail.com
        verified:
          type: string
          example: false
    LoginReqBody:
      title: Register
      type: object
      properties:
        email:
         type: string
         example: example@gmail.com
        password:
          type: string
          example: password123
    LoginResponse:
      title: Register response
      type: object
      properties:
        email:
         type: string
         example: example@gmail.com
        profile:
          type: object
          properties:
            role :
              type: string
              example : ADMIN
    createCategoriesReqBody:
      title: createCategoriesReqBody
      type: object
      properties:
        name:
          type: string
          example: "Frontend"
    createCategoriesResponse:
     title: createCategoriesResponse
     type: object
     properties:
       id:
         type: integer
         example: 1
       name:
        type: string
        example: "Frontend"
       
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
